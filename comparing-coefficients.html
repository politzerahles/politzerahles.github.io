<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html lang="en">
    <head>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .bigsource, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
	width:65%;
	margin-left:auto; margin-right:auto;
	border:1px solid #ccc;
	overflow:auto;
	background-color: #FFFFFF;
}
.source {
  background-color: #f5f5f5;
}
.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Comparing model coefficients to one another</title>
        <link rel="stylesheet" type="text/css" href="stevetools_stylesheet.css" />
	<script type="text/javascript"
		src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
    <head>

    <body>


		<h2>Comparing linear model coefficients to one another</h2>

		<p class="centercol">[Explanation of why you'd want to do this]</p>


		<h3>The code</h3>
		<p class="centercol">The following function will calculate the t-statistic for a comparison between two coefficients in a linear model (such as the kind you get from the <code>lm()</code> function):</p>
<p class="centercol" style="border:1px solid #000; border-style: dotted; padding:10px; background-color: white;"><code>compare_coefs <- function( model, coef1, coef2 ){<br /><br />diff <- (coef(model)[coef1] - coef(model)[coef2])<br />pooledvar <- sqrt( vcov(model)[coef1,coef1] + vcov(model)[coef2,coef2] - 2*vcov(model)[coef1,coef2] )<br />t <- diff / pooledvar<br />names(t) <- NULL # this is just for cosmetic purposes, it doesn't actually matter<br />return(t)<br /><br />}</code></p>
		<p class="centercol">To use it, just give it your model, plus the names or indices of the coefficients you want to compare. For example:</p>
<p class="centercol" style="border:1px solid #000; border-style: dotted; padding:10px; background-color: white;"><code>m <- lm( Temp ~ Wind + Ozone, airquality )<br />compare_coefs( m, 2, 3) # Compare the 2nd and 3rd coefficient<br />compare_coefs( m, "Wind", "Ozone" ) # Compare the "Wind" and "Ozone" coefficients; should get the same value</code></p>
		<p class="centercol">This will give you a <em>t</em>-statistic for the difference between those two coefficients. From there, you can just calculate the p-value of this statistic based on the degrees of freedom (which you can normally steal from the model summary):</p>
<p class="centercol" style="border:1px solid #000; border-style: dotted; padding:10px; background-color: white;"><code>t <- compare_coefs( m, "Wind", "Ozone" )<br />df <- m$df.residual # summary(m) shows that this is 113<br />pt( -abs(t), df ) *2 # I use -abs() to force t to be negative, and *2 to get a two-tailed p-value )</code></p>

 		<h3>Mixed-effects models</h3>
		<p class="centercol">If you want to do this to compare coefficients in a mixed-effects model, you'll have to make a few adjustments. In all the following, I am assuming you are using the <code>{lme4}</code> package to make your models. Use this at your own risk; it will give you numbers, and I <em>think</em> those numbers are accurate and actually mean something, but that's really a question for a statistician.</p>
		<p class="centercol">First, in the code, replace the <code>coef()</code> function with <code>fixef()</code> This is just necessary because lme4 models store the coefficients we want [in the format that I have lazily hard-coded the function to expect] in a structure that is accessed by <code>fixef()</code> rather than <code>coef()</code>.</p>
<p class="centercol" style="border:1px solid #000; border-style: dotted; padding:10px; background-color: white;"><code>compare_coefs <- function( model, coef1, coef2 ){<br /><br />diff <- (fixef(model)[coef1] - fixef(model)[coef2])<br />pooledvar <- sqrt( vcov(model)[coef1,coef1] + vcov(model)[coef2,coef2] - 2*vcov(model)[coef1,coef2] )<br />t <- diff / pooledvar<br />names(t) <- NULL # this is just for cosmetic purposes, it doesn't actually matter<br />return(t)<br /><br />}</code></p>

	<hr>
	<p class="mini">by <a href="./">Stephen Politzer-Ahles</a>. Last modified on 2025-02-13.</p>



    </body>
</html>
